<!DOCTYPE html>
<html>
  <head>
    <title>DOGUS Audit js</title>
    <script type="text/javascript">

    function getData() {
      var xhttp = new XMLHttpRequest();
      //console.log('getdta Access-Control-Allow-Headers');
      xhttp.onreadystatechange = function() {
        if (this.readyState == 4 && this.status == 200) {
          document.getElementById("response").innerHTML =  this.responseText;
          console.log(this.responseText);
        }
      };
      let url = "http://localhost:8095/getData?webAddress=" + document.getElementById('webaddress').value + '&pageCount=' + document.getElementById('pagecount').value;
      console.log('utl', url);
      xhttp.open("GET", url, true);
      xhttp.send();
    }

    </script>
    <link rel="stylesheet" type="text/css" src="css/main.css">
  </head>
  <body>
    <div>response from server: <pre id="response"></pre>
      <button onClick="getData()">Get data</button>
    <div class="container">
      <h1>DOGUS audit Javascript, inline and sourced.</h1>

      <!-- data in collapsed state for ease of access. -->
      <form id="auditJs" method="post">
        <div>
          <label for="webaddress">Web address</label>
          <input id="webaddress" type="text" name="webaddress">
          <label for="pagecount">Page count</label>
          <input id="pagecount" type="number" name="pagecount" />
          <input type="submit" onclick="postData()" value="Submit" />
        </div>
      </form>
      <!-- // End #auditjs -->
      <br /><br />
      <!-- Begin .wrap-collapsible loop for data returned -->
      <div class="wrap-collabsible">
        <input id="collapsible" class="toggle" type="checkbox">
        <label for="collapsible" class="lbl-toggle" tabindex="0">Page url crawled display here</label>
        <div class="collapsible-content">
          <div class="content-inner">
            <p>
              Below is a list of scripts inline and from source, listed as they are loaded into this page.
            </p>

            <table class="pages-crawled">
              <thead>
                <tr>
                  <th>Type</th>
                  <th>Actual src or inline code</th>
                  <th>Global</th>
                  <th>Unique</th>
                </tr>
              </thead>

              <tbody>
                <tr>
                  <td>Script: </td>
                  <td><code>long list of scripts to display here...</code></td>
                  <td>[G]</td>
                  <td>[U]</td>
                </tr>
              </tbody>
            </table>

          </div>
        </div>
      </div><!-- // End .wrap-collapsible loop for data returned -->

    </div><!-- // End .container -->
  </body>
</html>
